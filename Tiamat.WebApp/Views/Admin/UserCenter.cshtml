@model Tiamat.WebApp.Models.RegisterUserViewModel

@{
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
    ViewData["Title"] = "Регистрация";
}

<style>
    #particles-js {
        position: fixed !important;
        width: 100% !important;
        height: 100% !important;
        top: 0 !important;
        left: 0 !important;
        z-index: -1 !important;
    }

    .dark-card {
        background-color: #1a1a1a;
        border: 1px solid #333333;
        border-radius: 10px;
    }

        .dark-card .card-title {
            color: #ffffff;
        }

    .dark-theme .form-control {
        background-color: #2c2c2c;
        color: #eaeaea;
        border: 1px solid #3a3a3a;
        border-radius: 6px;
    }

        .dark-theme .form-control::placeholder {
            color: #777;
        }

        .dark-theme .form-control:focus {
            background-color: #2c2c2c;
            border-color: #555 !important;
            outline: none !important;
            box-shadow: none !important;
        }

    .dark-theme .input-group-text {
        background-color: #2c2c2c;
        border: 1px solid #3a3a3a;
        color: #ddd;
        border-radius: 6px 0 0 6px;
    }

    .dark-theme .btn-primary {
        background-color: #2c2c2c;
        border: 1px solid #3a3a3a;
        color: #ffffff;
        border-radius: 6px;
        transition: background-color 0.2s ease, border-color 0.2s ease;
    }

        .dark-theme .btn-primary:hover {
            background-color: #3a3a3a;
            border-color: #444;
            color: #ffffff;
        }

    .dark-theme .text-danger {
        color: #ff5555 !important;
    }
</style>

<link rel="stylesheet" href="~/css/loginStyle.css" />

<div id="particles-js"></div>

<div class="container-fluid py-0 dark-bg dark-theme d-flex align-items-start justify-content-center"
     style="position: relative; padding-top: 4rem;">
    <div class="row justify-content-center w-100">
        <div class="col-12 col-md-8 col-lg-5">
            <div class="text-center mb-3">
                <h1 class="display-5 fw-bold mb-2">Регистрация на нов потребител</h1>
                <p class="lead">Моля, попълнете формата, за да създадете нов акаунт.</p>
            </div>

            <div class="card dark-card shadow px-3 py-4">
                <div class="card-body">
                    <h2 class="card-title mb-4">Регистрация</h2>

                    @Html.ValidationSummary(true, "", new { @class = "text-danger mb-3" })

                    <form asp-action="UserCenter" asp-controller="Admin" method="post" id="registerForm">
                        <div class="mb-3 position-relative">
                            <label asp-for="UserName" class="form-label">Потребителско име</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-person"></i>
                                </span>
                                <input asp-for="UserName"
                                       class="form-control"
                                       placeholder="Въведете потребителско име"
                                       required />
                            </div>
                            <span asp-validation-for="UserName" class="text-danger small"></span>
                        </div>

                        <div class="mb-3 position-relative">
                            <label asp-for="Email" class="form-label">Имейл</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-envelope"></i>
                                </span>
                                <input asp-for="Email"
                                       class="form-control"
                                       placeholder="Въведете имейл адрес"
                                       required />
                            </div>
                            <span asp-validation-for="Email" class="text-danger small"></span>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 mt-3">
                            Регистрирай
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @if (TempData["UserCreated"] != null)
    {
        <script>
            iziToast.success({
                title: 'Успех!',
                message: 'Акаунтът беше регистриран успешно.',
                position: 'topRight'
            });

            var password = '@TempData["GeneratedPassword"]';
            navigator.clipboard.writeText(password)
                .then(function () {
                    iziToast.warning({
                        title: 'DEBUG MODE',
                        message: 'Паролата беше копирана в клипборда.',
                        position: 'bottomRight'
                    });
                })
                .catch(function (err) {
                    console.error('Failed to copy password: ', err);
                });
        </script>
    }

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="~/js/particles-init.js"></script>

    @Html.Partial("_IziToastPartial")
    @await Html.PartialAsync("_ValidationScriptsPartial")
}

<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" />
